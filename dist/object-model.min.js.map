{"version":3,"sources":["object-model.js"],"names":["exports","is","Constructor","obj","isFunction","o","isObject","isPlainObject","Object","getPrototypeOf","prototype","bettertypeof","toString","call","match","merge","target","src","deep","includingProto","key","hasOwnProperty","define","value","enumerable","defineProperty","writable","configurable","setConstructor","model","constructor","setPrototypeOf","setConstructorProto","proto","create","stack","length","includes","BasicModel","concat","name","Array","map","item","join","props","keys","indent","repeat","slice","def","default","validate","initModel","definition","assertions","parseDefinition","checkDefinition","path","errorStack","callStack","shouldAutoCast","indexFound","indexOf","autocast","_validate","forEach","val","pdef","some","part","checkDefinitionPart","push","expected","received","RegExp","test","Number","Date","isNaN","checkAssertions","assertion","assertionResult","err","onFail","description","message","defNode","suitableModels","console","warn","ObjectModel","proxy","getProxy","Proxy","get","newPath","set","isConstant","conventionForConstant","initialValue","newProxy","unstackErrors","has","Reflect","conventionForPrivate","ownKeys","filter","ArrayModel","array","arr","ARRAY_MUTATOR_METHODS","proxifyArrayMethod","setArrayKey","method","testArray","apply","arguments","returnValue","a","i","parseInt","FunctionModel","fn","proxyFn","args","assign","defaults","argDef","return","Function","MapModel","iterable","Map","MAP_MUTATOR_METHODS","testMap","SetModel","_set","Set","SET_MUTATOR_METHODS","testSet","d","errorCollector","failed","initialErrorCollector","extend","reduce","ext","index","self","arg","submodel","assert","defaultTo","errors","e","TypeError","replace","toUpperCase","p","out","f","values","Basic","Model"],"mappings":"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","file":"object-model.min.js","sourcesContent":["(function (exports) {\n\t'use strict';\n\n\tconst defineProperty = Object.defineProperty;\r\n\r\n\tfunction is(Constructor, obj){\r\n\t\treturn obj instanceof Constructor\r\n\t}\r\n\r\n\tfunction isFunction(o){\r\n\t\treturn typeof o === \"function\"\r\n\t}\r\n\r\n\tfunction isObject(o){\r\n\t    return typeof o === \"object\"\r\n\t}\r\n\r\n\tfunction isPlainObject(o){\r\n\t\treturn o && isObject(o) && Object.getPrototypeOf(o) === Object.prototype\r\n\t}\r\n\r\n\tfunction bettertypeof(obj){\r\n\t\treturn ({}).toString.call(obj).match(/\\s([a-zA-Z]+)/)[1]\r\n\t}\r\n\r\n\tfunction merge(target, src={}, deep, includingProto) {\r\n\t\tfor(let key in src){\r\n\t\t\tif(includingProto || src.hasOwnProperty(key)){\r\n\t\t\t\tif(deep && isPlainObject(src[key])){\r\n\t\t\t\t\tconst o = {};\r\n\t\t\t\t\tmerge(o, target[key], deep);\r\n\t\t\t\t\tmerge(o, src[key], deep);\r\n\t\t\t\t\ttarget[key] = o;\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttarget[key] = src[key];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction define(obj, key, value, enumerable) {\r\n\t\tdefineProperty(obj, key, { value, enumerable, writable: true, configurable: true });\r\n\t}\r\n\r\n\tfunction setConstructor(model, constructor){\r\n\t\tObject.setPrototypeOf(model, constructor.prototype);\r\n\t\tdefine(model, \"constructor\", constructor);\r\n\t}\r\n\r\n\tfunction setConstructorProto(constructor, proto){\r\n\t\tconstructor.prototype = Object.create(proto);\r\n\t\tconstructor.prototype.constructor = constructor;\r\n\t}\r\n\r\n\tfunction toString(obj, stack = []){\r\n\t\tif(stack.length > 15 || stack.includes(obj)) return '...'\r\n\t\tif(obj == null) return String(obj)\r\n\t\tif(typeof obj == \"string\") return `\"${obj}\"`\r\n\t\tif(is(BasicModel, obj)) return obj.toString(stack)\r\n\t\tstack = [obj].concat(stack);\r\n\t\tif(isFunction(obj)) return obj.name || obj.toString(stack)\r\n\t\tif(is(Array, obj)) return `[${obj.map(item => toString(item, stack)).join(', ')}]`\r\n\t\tif(obj.toString !== Object.prototype.toString) return obj.toString()\r\n\t\tif(obj && isObject(obj)) {\r\n\t\t\tconst props = Object.keys(obj),\r\n\t\t\t\t  indent = '\\t'.repeat(stack.length);\r\n\t\t\treturn `{${props.map(\r\n\t\t\tkey => `\\n${indent+key}: ${toString(obj[key], stack)}`\r\n\t\t).join(',')} ${props.length ? `\\n${indent.slice(1)}` : ''}}`\r\n\t\t}\r\n\t\treturn String(obj)\r\n\t}\n\n\tfunction BasicModel(def){\r\n\t\tconst model = function(obj = model.default) {\r\n\t\t\tmodel.validate(obj);\r\n\t\t\treturn obj\r\n\t\t};\r\n\r\n\t\tinitModel(model, def, BasicModel);\r\n\t\treturn model\r\n\t}\r\n\r\n\tsetConstructorProto(BasicModel, Function.prototype);\r\n\r\n\tObject.assign(BasicModel.prototype, {\r\n\t\ttoString(stack){\r\n\t\t\treturn parseDefinition(this.definition).map(d => toString(d, stack)).join(\" or \")\r\n\t\t},\r\n\r\n\t\tassertions: [],\r\n\r\n\t\tvalidate(obj, errorCollector){\r\n\t\t\tthis._validate(obj, null, this.errorStack, []);\r\n\t\t\tthis.unstackErrors(errorCollector);\r\n\t\t},\r\n\r\n\t\ttest(obj){\r\n\t\t\tlet failed,\r\n\t\t\t    initialErrorCollector = this.errorCollector;\r\n\t\t\tthis.errorCollector = () => { failed = true; };\r\n\t\t\tthis(obj);\r\n\t\t\tthis.errorCollector = initialErrorCollector;\r\n\t\t\treturn !failed\r\n\t\t},\r\n\r\n\t\textend(){\r\n\t\t\tconst args = [...arguments];\r\n\t\t\tconst def = args\r\n\t\t\t\t.reduce((def, ext) => def.concat(parseDefinition(ext)), parseDefinition(this.definition))\r\n\t\t\t\t.filter((value, index, self) => self.indexOf(value) === index); // remove duplicates\r\n\r\n\t\t\tlet assertions = [...this.assertions];\r\n\t\t\targs.forEach(arg => {\r\n\t\t\t\tif(is(BasicModel, arg)) assertions = assertions.concat(arg.assertions);\r\n\t\t\t});\r\n\r\n\t\t\tconst submodel = new this.constructor(def);\r\n\t\t\tsetConstructorProto(submodel, this.prototype);\r\n\t\t\tsubmodel.assertions = assertions;\r\n\t\t\tsubmodel.errorCollector = this.errorCollector;\r\n\t\t\treturn submodel\r\n\t\t},\r\n\r\n\t\tassert(assertion, description = toString(assertion)){\r\n\t\t\tassertion.description = description;\r\n\t\t\tthis.assertions = this.assertions.concat(assertion);\r\n\t\t\treturn this\r\n\t\t},\r\n\r\n\t\tdefaultTo(val){\r\n\t\t\tthis.default = val;\r\n\t\t\treturn this\r\n\t\t},\r\n\r\n\t\terrorCollector(errors){\r\n\t\t\tlet e = new TypeError(errors.map(e => e.message).join('\\n'));\r\n\t\t\te.stack = e.stack.replace(/\\n.*object-model(.|\\n)*object-model.*/, \"\"); // blackbox objectmodel in stacktrace\r\n\t\t\tthrow e\r\n\t\t},\r\n\r\n\t\t_validate(obj, path, errorStack, callStack){\r\n\t\t\tcheckDefinition(obj, this.definition, path, errorStack, callStack);\r\n\t\t\tcheckAssertions(obj, this, errorStack);\r\n\t\t},\r\n\r\n\t\t// throw all errors collected\r\n\t\tunstackErrors(errorCollector){\r\n\t\t\tif (!this.errorStack.length) return\r\n\t\t\tif (!errorCollector) errorCollector = this.errorCollector;\r\n\t\t\tconst errors = this.errorStack.map(err => {\r\n\t\t\t\tif (!err.message) {\r\n\t\t\t\t\tconst def = is(Array, err.expected) ? err.expected : [err.expected];\r\n\t\t\t\t\terr.message = (\"expecting \" + (err.path ? err.path + \" to be \" : \"\") + def.map(d => toString(d)).join(\" or \")\r\n\t\t\t\t\t+ \", got \" + (err.received != null ? bettertypeof(err.received) + \" \" : \"\") + toString(err.received));\r\n\t\t\t\t}\r\n\t\t\t\treturn err\r\n\t\t\t});\r\n\t\t\tthis.errorStack = [];\r\n\t\t\terrorCollector.call(this, errors);\r\n\t\t}\r\n\r\n\t});\r\n\r\n\tBasicModel.conventionForConstant = key => key.toUpperCase() === key;\r\n\tBasicModel.conventionForPrivate = key => key[0] === \"_\";\r\n\r\n\tfunction initModel(model, def, constructor){\r\n\t\tsetConstructor(model, constructor);\r\n\t\tmodel.definition = def;\r\n\t\tmodel.assertions = model.assertions.slice();\r\n\t\tdefine(model, \"errorStack\", []);\r\n\t}\r\n\r\n\tfunction parseDefinition(def){\r\n\t\tif(!isPlainObject(def)){\r\n\t\t\tif(!is(Array, def)) return [def]\r\n\t\t\tif(def.length === 1) return [...def, undefined, null]\r\n\t\t} else {\r\n\t\t\tfor(let key of Object.keys(def))\r\n\t\t\t\tdef[key] = parseDefinition(def[key]);\r\n\t\t}\r\n\t\treturn def\r\n\t}\r\n\r\n\tfunction checkDefinition(obj, def, path, errorStack, callStack, shouldAutoCast=false){\r\n\t\tconst indexFound = callStack.indexOf(def);\r\n\t\tif(indexFound !== -1 && callStack.indexOf(def, indexFound+1) !== -1)\r\n\t\t\treturn obj //if found twice in call stack, cycle detected, skip validation\r\n\r\n\t\tif(shouldAutoCast)\r\n\t\t\tobj = autocast(obj, def);\r\n\r\n\r\n\t\tif(is(BasicModel, def)){\r\n\t\t\tdef._validate(obj, path, errorStack, callStack.concat(def));\r\n\t\t}\r\n\t\telse if(isPlainObject(def)){\r\n\t\t\tObject.keys(def).forEach(key => {\r\n\t\t\t\tconst val = obj != null ? obj[key] : undefined;\r\n\t\t\t\tcheckDefinition(val, def[key], path ? path + '.' + key : key, errorStack, callStack);\r\n\t\t\t});\r\n\t\t}\r\n\t\telse {\r\n\t\t\tconst pdef = parseDefinition(def);\r\n\t\t\tif(pdef.some(part => checkDefinitionPart(obj, part, path, callStack)))\r\n\t\t\t\treturn obj\r\n\r\n\t\t\terrorStack.push({\r\n\t\t\t\texpected: def,\r\n\t\t\t\treceived: obj,\r\n\t\t\t\tpath\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn obj\r\n\t}\r\n\r\n\tfunction checkDefinitionPart(obj, def, path, callStack){\r\n\t\tif(obj == null) return obj === def\r\n\t\tif(isPlainObject(def) || is(BasicModel, def)){ // object or model as part of union type\r\n\t\t\tconst errorStack = [];\r\n\t\t\tcheckDefinition(obj, def, path, errorStack, callStack);\r\n\t\t\treturn !errorStack.length\r\n\t\t}\r\n\t\tif(is(RegExp, def)) return def.test(obj)\r\n\t\tif(def === Number || def === Date) return obj.constructor === def && !isNaN(obj)\r\n\t\treturn obj === def\r\n\t\t\t|| (isFunction(def) && is(def, obj))\r\n\t\t\t|| obj.constructor === def\r\n\t}\r\n\r\n\tfunction checkAssertions(obj, model, errorStack = model.errorStack){\r\n\t\tfor(let assertion of model.assertions){\r\n\t\t\tlet assertionResult;\r\n\t\t\ttry {\r\n\t\t\t\tassertionResult = assertion.call(model, obj);\r\n\t\t\t} catch(err){\r\n\t\t\t\tassertionResult = err;\r\n\t\t\t}\r\n\t\t\tif(assertionResult !== true){\r\n\t\t\t\tconst onFail = isFunction(assertion.description) ? assertion.description : (assertionResult, value) =>\r\n\t\t\t\t\t`assertion \"${assertion.description}\" returned ${toString(assertionResult)} for value ${toString(value)}`;\r\n\t\t\t\terrorStack.push({\r\n\t\t\t\t\tmessage: onFail.call(model, assertionResult, obj)\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction autocast(obj, defNode=[]) {\r\n\t\tif(!obj || isPlainObject(defNode) || is(BasicModel, obj.constructor))\r\n\t\t\treturn obj // no value or not leaf or already a model instance\r\n\r\n\t\tconst def = parseDefinition(defNode),\r\n\t\t      suitableModels = [];\r\n\r\n\t\tfor (let part of def) {\r\n\t\t\tif(is(BasicModel, part) && part.test(obj))\r\n\t\t\t\tsuitableModels.push(part);\r\n\t\t}\r\n\r\n\t\tif (suitableModels.length === 1)\r\n\t\t\treturn suitableModels[0](obj) // automatically cast to suitable model when explicit\r\n\r\n\t\tif (suitableModels.length > 1)\r\n\t\t\tconsole.warn(`Ambiguous model for value ${toString(obj)}, could be ${suitableModels.join(\" or \")}`);\r\n\r\n\t\treturn obj\r\n\t}\n\n\tfunction ObjectModel(def){\r\n\r\n\t\tconst model = function(obj = model.default) {\r\n\t\t\tif(is(model, obj)) return obj\r\n\t\t\tif(!is(model, this)) return new model(obj)\r\n\t\t\tmerge(this, obj, true);\r\n\t\t\tconst proxy = getProxy(model, this, model.definition);\r\n\t\t\tmodel.validate(proxy);\r\n\t\t\treturn proxy\r\n\t\t};\r\n\r\n\t\tsetConstructorProto(model, Object.prototype);\r\n\t\tinitModel(model, def, ObjectModel);\r\n\t\treturn model\r\n\t}\r\n\r\n\tsetConstructorProto(ObjectModel, BasicModel.prototype);\r\n\r\n\tObject.assign(ObjectModel.prototype, {\r\n\r\n\t\tdefaults(p){\r\n\t\t\tObject.assign(this.prototype, p);\r\n\t\t\treturn this\r\n\t\t},\r\n\r\n\t\ttoString(stack){\r\n\t\t\treturn toString(this.definition, stack)\r\n\t\t},\r\n\r\n\t\textend(){\r\n\t\t\tconst def = {};\r\n\t\t\tconst proto = {};\r\n\t\t\tconst args = [...arguments];\r\n\r\n\t\t\tObject.assign(def, this.definition);\r\n\t\t\tmerge(proto, this.prototype, false, true);\r\n\t\t\targs.forEach(arg => {\r\n\t\t\t\tif(is(BasicModel, arg)) merge(def, arg.definition, true);\r\n\t\t\t\tif(isFunction(arg)) merge(proto, arg.prototype, true, true);\r\n\t\t\t\tif(isObject(arg)) merge(def, arg, true, true);\r\n\t\t\t});\r\n\r\n\t\t\tlet assertions = [...this.assertions];\r\n\t\t\targs.forEach(arg => {\r\n\t\t\t\tif(is(BasicModel, arg)) assertions = assertions.concat(arg.assertions);\r\n\t\t\t});\r\n\r\n\t\t\tconst submodel = new this.constructor(def);\r\n\t\t\tsetConstructorProto(submodel, this.prototype);\r\n\t\t\tObject.assign(submodel.prototype, proto);\r\n\t\t\tsubmodel.assertions = assertions;\r\n\t\t\tsubmodel.errorCollector = this.errorCollector;\r\n\t\t\treturn submodel\r\n\t\t},\r\n\r\n\t\t_validate(obj, path, errorStack, callStack){\r\n\t\t\tif(!isObject(obj)){\r\n\t\t\t\terrorStack.push({\r\n\t\t\t\t\texpected: this,\r\n\t\t\t\t\treceived: obj,\r\n\t\t\t\t\tpath\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tcheckDefinition(obj, this.definition, path, errorStack, callStack);\r\n\t\t\t}\r\n\t\t\tcheckAssertions(obj, this, errorStack);\r\n\t\t}\r\n\t});\r\n\r\n\tfunction getProxy(model, obj, defNode, path) {\r\n\t\tif(!isPlainObject(defNode)) {\r\n\t\t\treturn autocast(obj, defNode)\r\n\t\t}\r\n\r\n\t\treturn new Proxy(obj || {}, {\r\n\t\t\tget(o, key) {\r\n\t\t\t\tconst newPath = (path ? path + '.' + key : key);\r\n\t\t\t\treturn getProxy(model, o[key], defNode[key], newPath)\r\n\t\t\t},\r\n\t\t\tset(o, key, val) {\r\n\t\t\t\tconst newPath = (path ? path + '.' + key : key),\r\n\t\t\t\t\t  isConstant = BasicModel.conventionForConstant(key),\r\n\t\t\t\t\t  initialValue = o[key];\r\n\t\t\t\t\r\n\t\t\t\tif(isConstant && initialValue !== undefined){\r\n\t\t\t\t\tmodel.errorStack.push({\r\n\t\t\t\t\t\tmessage: `cannot redefine constant ${key}`\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tif(defNode.hasOwnProperty(key)){\r\n\t\t\t\t\tconst newProxy = getProxy(model, val, defNode[key], newPath);\r\n\t\t\t\t\tcheckDefinition(newProxy, defNode[key], newPath, model.errorStack, []);\r\n\t\t\t\t\to[key] = newProxy;\r\n\t\t\t\t\tcheckAssertions(obj, model);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tmodel.errorStack.push({\r\n\t\t\t\t\t\tmessage: `cannot find property ${newPath} in the model definition`\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\r\n\t\t\t\tif(model.errorStack.length){\r\n\t\t\t\t\to[key] = initialValue;\r\n\t\t\t\t\tmodel.unstackErrors();\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn true\r\n\t\t\t},\r\n\t\t\thas(o, key){\r\n\t\t\t\treturn Reflect.has(o, key) && !BasicModel.conventionForPrivate(key)\r\n\t\t\t},\r\n\t\t\townKeys(o){\r\n\t\t\t\treturn Reflect.ownKeys(o).filter(key => !BasicModel.conventionForPrivate(key))\r\n\t\t\t},\r\n\t\t\tgetPrototypeOf(){\r\n\t\t\t\treturn model.prototype\r\n\t\t\t}\r\n\t\t})\r\n\t}\n\n\tconst ARRAY_MUTATOR_METHODS = [\"pop\", \"push\", \"reverse\", \"shift\", \"sort\", \"splice\", \"unshift\"];\r\n\r\n\tfunction ArrayModel(def){\r\n\r\n\t\tconst model = function(array = model.default) {\r\n\t\t\tmodel.validate(array);\r\n\t\t\treturn new Proxy(array, {\r\n\t\t\t\tget(arr, key) {\r\n\t\t\t\t\tif (key === \"constructor\")\r\n\t\t\t\t\t\treturn model\r\n\t\t\t\t\telse if (ARRAY_MUTATOR_METHODS.includes(key))\r\n\t\t\t\t\t\treturn proxifyArrayMethod(arr, key, model)\r\n\t\t\t\t\treturn arr[key]\r\n\t\t\t\t},\r\n\t\t\t\tset(arr, key, val) {\r\n\t\t\t\t\tsetArrayKey(arr, key, val, model);\r\n\t\t\t\t\treturn true\r\n\t\t\t\t},\r\n\t\t\t\tgetPrototypeOf(){\r\n\t\t\t\t\treturn model.prototype\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t};\r\n\r\n\t\tsetConstructorProto(model, Array.prototype);\r\n\t\tinitModel(model, def, ArrayModel);\r\n\t\treturn model\r\n\t}\r\n\r\n\tsetConstructorProto(ArrayModel, BasicModel.prototype);\r\n\tObject.assign(ArrayModel.prototype, {\r\n\r\n\t\ttoString(stack){\r\n\t\t\treturn 'Array of ' + toString(this.definition, stack)\r\n\t\t},\r\n\r\n\t\t_validate(arr, path, errorStack, callStack){\r\n\t\t\tif(is(Array, arr))\r\n\t\t\t\tarr.forEach((a,i) => {\r\n\t\t\t\t\tarr[i] = checkDefinition(a, this.definition, `${path || \"Array\"}[${i}]`, errorStack, callStack, true);\r\n\t\t\t\t});\r\n\t\t\telse errorStack.push({\r\n\t\t\t\texpected: this,\r\n\t\t\t\treceived: arr,\r\n\t\t\t\tpath\r\n\t\t\t});\r\n\r\n\t\t\tcheckAssertions(arr, this, errorStack);\r\n\t\t}\r\n\t});\r\n\r\n\tfunction proxifyArrayMethod(array, method, model){\r\n\t\treturn function() {\r\n\t\t\tconst testArray = array.slice();\r\n\t\t\tArray.prototype[method].apply(testArray, arguments);\r\n\t\t\tmodel.validate(testArray);\r\n\t\t\tconst returnValue = Array.prototype[method].apply(array, arguments);\r\n\t\t\tarray.forEach((a,i)=> array[i] = autocast(a, model.definition));\r\n\t\t\treturn returnValue\r\n\t\t}\r\n\t}\r\n\r\n\tfunction setArrayKey(array, key, value, model){\r\n\t\tif(parseInt(key) === +key && key >= 0)\r\n\t\t\tvalue = checkDefinition(value, model.definition, 'Array['+key+']', model.errorStack, [], true);\r\n\r\n\t\tconst testArray = array.slice();\r\n\t\ttestArray[key] = value;\r\n\t\tcheckAssertions(testArray, model);\r\n\t\tmodel.unstackErrors();\r\n\t\tarray[key] = value;\r\n\t}\n\n\tfunction FunctionModel(){\r\n\r\n\t\tconst model = function(fn = model.default) {\r\n\t\t\tconst def = model.definition;\r\n\t\t\tconst proxyFn = function () {\r\n\t\t\t\tconst args = [];\r\n\t\t\t\tObject.assign(args, def.defaults);\r\n\t\t\t\tObject.assign(args, [...arguments]);\r\n\t\t\t\tif (args.length > def.arguments.length) {\r\n\t\t\t\t\tmodel.errorStack.push({\r\n\t\t\t\t\t\texpected: toString(fn) + \" to be called with \" + def.arguments.length + \" arguments\",\r\n\t\t\t\t\t\treceived: args.length\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tdef.arguments.forEach((argDef, i) => {\r\n\t\t\t\t\targs[i] = checkDefinition(args[i], argDef, `arguments[${i}]`, model.errorStack, [], true);\r\n\t\t\t\t});\r\n\t\t\t\tcheckAssertions(args, model);\r\n\r\n\t\t\t\tlet returnValue;\r\n\t\t\t\tif(!model.errorStack.length){\r\n\t\t\t\t\treturnValue = fn.apply(this, args);\r\n\t\t\t\t\tif (\"return\" in def)\r\n\t\t\t\t\t\treturnValue = checkDefinition(returnValue, def.return, \"return value\", model.errorStack, [], true);\r\n\t\t\t\t}\r\n\t\t\t\tmodel.unstackErrors();\r\n\t\t\t\treturn returnValue\r\n\t\t\t};\r\n\t\t\tsetConstructor(proxyFn, model);\r\n\t\t\treturn proxyFn\r\n\t\t};\r\n\r\n\t\tsetConstructorProto(model, Function.prototype);\r\n\r\n\t\tconst def = { arguments: [...arguments] };\r\n\t\tinitModel(model, def, FunctionModel);\r\n\t\treturn model\r\n\t}\r\n\r\n\tsetConstructorProto(FunctionModel, BasicModel.prototype);\r\n\r\n\tObject.assign(FunctionModel.prototype, {\r\n\r\n\t\ttoString(stack){\r\n\t\t\tlet out = 'Function(' + this.definition.arguments.map(argDef => toString(argDef, stack)).join(\",\") +')';\r\n\t\t\tif(\"return\" in this.definition) {\r\n\t\t\t\tout += \" => \" + toString(this.definition.return);\r\n\t\t\t}\r\n\t\t\treturn out\r\n\t\t},\r\n\r\n\t\treturn(def){\r\n\t\t\tthis.definition.return = def;\r\n\t\t\treturn this\r\n\t\t},\r\n\r\n\t\tdefaults(){\r\n\t\t\tthis.definition.defaults = [...arguments];\r\n\t\t\treturn this\r\n\t\t},\r\n\r\n\t\t_validate(f, path, errorStack){\r\n\t\t\tif (!isFunction(f)) {\r\n\t\t\t\terrorStack.push({\r\n\t\t\t\t\texpected: \"Function\",\r\n\t\t\t\t\treceived: f,\r\n\t\t\t\t\tpath\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t});\n\n\tconst MAP_MUTATOR_METHODS = [\"set\", \"delete\", \"clear\"];\r\n\r\n\tfunction MapModel(def){\r\n\r\n\t\tconst model = function(iterable) {\r\n\t\t\tconst map = new Map(iterable);\r\n\t\t\tmodel.validate(map);\r\n\r\n\t\t\tfor(let method of MAP_MUTATOR_METHODS){\r\n\t\t\t\tmap[method] = function() {\r\n\t\t\t\t\tconst testMap = new Map(map);\r\n\t\t\t\t\tMap.prototype[method].apply(testMap, arguments);\r\n\t\t\t\t\tmodel.validate(testMap);\r\n\t\t\t\t\treturn Map.prototype[method].apply(map, arguments)\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\tsetConstructor(map, model);\r\n\t\t\treturn map\r\n\t\t};\r\n\r\n\t\tsetConstructorProto(model, Map.prototype);\r\n\t\tinitModel(model, def, MapModel);\r\n\t\treturn model\r\n\t}\r\n\r\n\tsetConstructorProto(MapModel, BasicModel.prototype);\r\n\tObject.assign(MapModel.prototype, {\r\n\r\n\t\ttoString(stack){\r\n\t\t\treturn \"Map of \" + toString(this.definition, stack)\r\n\t\t},\r\n\r\n\t\t_validate(map, path, errorStack, callStack){\r\n\t\t\tif(map instanceof Map){\r\n\t\t\t\tfor(let [key,val] of map){\r\n\t\t\t\t\tcheckDefinition(val, this.definition, `${path || \"Map\"}[${key}]`, errorStack, callStack);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\terrorStack.push({\r\n\t\t\t\t\texpected: this,\r\n\t\t\t\t\treceived: map,\r\n\t\t\t\t\tpath\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tcheckAssertions(map, this, errorStack);\r\n\t\t}\r\n\t});\n\n\tconst SET_MUTATOR_METHODS = [\"add\", \"delete\", \"clear\"];\r\n\r\n\tfunction SetModel(def){\r\n\r\n\t\tconst model = function(iterable) {\r\n\t\t\tconst _set = new Set(iterable);\r\n\t\t\tmodel.validate(_set);\r\n\r\n\t\t\tfor(let method of SET_MUTATOR_METHODS){\r\n\t\t\t\t_set[method] = function() {\r\n\t\t\t\t\tconst testSet = new Set(_set);\r\n\t\t\t\t\tSet.prototype[method].apply(testSet, arguments);\r\n\t\t\t\t\tmodel.validate(testSet);\r\n\t\t\t\t\treturn Set.prototype[method].apply(_set, arguments)\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\tsetConstructor(_set, model);\r\n\t\t\treturn _set\r\n\t\t};\r\n\r\n\t\tsetConstructorProto(model, Set.prototype);\r\n\t\tinitModel(model, def, SetModel);\r\n\t\treturn model\r\n\t}\r\n\r\n\tsetConstructorProto(SetModel, BasicModel.prototype);\r\n\tObject.assign(SetModel.prototype, {\r\n\r\n\t\ttoString(stack){\r\n\t\t\treturn \"Set of \" + toString(this.definition, stack)\r\n\t\t},\r\n\r\n\t\t_validate(_set, path, errorStack, callStack){\r\n\t\t\tif(_set instanceof Set){\r\n\t\t\t\tfor(let item of _set.values()){\r\n\t\t\t\t\tcheckDefinition(item, this.definition, (path || \"Set\"), errorStack, callStack);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\terrorStack.push({\r\n\t\t\t\t\texpected: this,\r\n\t\t\t\t\treceived: _set,\r\n\t\t\t\t\tpath\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tcheckAssertions(_set, this, errorStack);\r\n\t\t}\r\n\t});\n\n\texports.BasicModel = BasicModel;\n\texports.Basic = BasicModel;\n\texports.ObjectModel = ObjectModel;\n\texports.Object = ObjectModel;\n\texports.ArrayModel = ArrayModel;\n\texports.Array = ArrayModel;\n\texports.FunctionModel = FunctionModel;\n\texports.Function = FunctionModel;\n\texports.MapModel = MapModel;\n\texports.Map = MapModel;\n\texports.SetModel = SetModel;\n\texports.Set = SetModel;\n\n}((this.Model = this.Model || {})));\n"]}