// ObjectModel v2.6.0 - http://objectmodel.js.org
!function(a){function b(a,b){return b instanceof a}function c(a){return"function"==typeof a}function d(a){return"object"==typeof a}function e(a){return a&&d(a)&&Object.getPrototypeOf(a)===Object.prototype}function f(a){return{}.toString.call(a).match(/\s([a-zA-Z]+)/)[1]}function g(a){return Array.prototype.slice.call(a)}function h(a,b){return void 0===b?a:b}function i(a,b,c,d){for(var f in b||{})if(d||b.hasOwnProperty(f))if(c&&e(b[f])){var g={};i(g,a[f],c),i(g,b[f],c),a[f]=g}else a[f]=b[f]}function j(a,b,c,d){aa(a,b,{value:c,enumerable:d,writable:!0,configurable:!0})}function k(a,b){Object.setPrototypeOf(a,b[S]),j(a,T,b)}function l(a,b){a[S]=Object.create(b),a[S][T]=a}function m(a,e){if(e=e||[],e.length>15||e.indexOf(a)>=0)return"...";if(null==a)return String(a);if("string"==typeof a)return'"'+a+'"';if(b(n,a))return a.toString(e);if(e=[a].concat(e),c(a))return a.name||a.toString(e);if(b(Array,a))return"["+a.map(function(a){return m(a,e)}).join(", ")+"]";if(a.toString!==Object.prototype.toString)return a.toString();if(a&&d(a)){var f=new Array(e.length).join("\t"),g=Object.keys(a);return"{"+g.map(function(b){return"\n"+f+"\t"+b+": "+m(a[b],e)}).join(",")+(g.length?"\n"+f:"")+"}"}return String(a)}function n(a){if(e(a))return n[y](a);var b=function(a){return a=h(b[U],a),b[G](a),a};return o(b,arguments,n),b}function o(a,b,c){if(0===b.length)throw new Error("Model definition is required");k(a,c),a[D]=b[0],a[E]=a[E].slice(),j(a,P,[])}function p(a){if(e(a))Object.keys(a).forEach(function(b){a[b]=p(a[b])});else{if(!b(Array,a))return[a];if(1===a.length)return a.concat(void 0,null)}return a}function q(a,c,d,f,g,h){var i=f.indexOf(c);if(i!==-1&&f.slice(i+1).indexOf(c)!==-1)return a;if(h&&(a=t(a,c)),b(n,c))c[H](a,d,f.concat(c),g);else if(e(c))Object.keys(c).forEach(function(b){var e=null!=a?a[b]:void 0;q(e,c[b],d?d+"."+b:b,f,g)});else{for(var j=p(c),k=0,l=j.length;k<l;k++)if(r(a,j[k],d,f))return a;var m={};m[L]=c,m[M]=a,m[N]=d,g.push(m)}return a}function r(a,d,f,g){if(null==a)return a===d;if(e(d)||b(n,d)){var h=[];return q(a,d,f,g,h),!h.length}return b(RegExp,d)?d.test(a):d===Number||d===Date?a[T]===d&&!isNaN(a):a===d||c(d)&&b(d,a)||a[T]===d}function s(a,b,d,e){for(var f=0,g=b[E].length;f<g;f++){var h,i=b[E][f],j=i[F],k=c(j)?j:function(a,b){return'assertion "'+j+'" returned '+m(a)+" for value "+m(b)};try{h=i.call(b,a)}catch(a){h=a}if(h!==!0){var l={};l[O]=k.call(b,h,a),l[L]=i,l[M]=a,l[N]=d,e.push(l)}}}function t(a,c){if(!a||b(n,a[T]))return a;for(var d=p(c||[]),e=[],f=0,g=d.length;f<g;f++){var h=d[f];b(n,h)&&h[I](a)&&e.push(h)}var i=e.length;return 1===i?e[0](a):(i>1&&console.warn("Ambiguous model for value "+m(a)+", could be "+e.join(" or ")),a)}function u(a,c,d,f){if(!e(d))return t(c,d);var g=b(Object,c)?c:{},h=Object.create(Object.getPrototypeOf(g));for(var i in g)!g.hasOwnProperty(i)||i in d||(h[i]=g[i]);return Object.keys(d).forEach(function(b){var e=f?f+"."+b:b,i=n[B](b);aa(h,b,{get:function(){return u(a,g[b],d[b],e)},set:function(f){if(i&&void 0!==g[b]){var h={};h[O]="cannot redefine constant "+b,a[P].push(h)}var j=u(a,f,d[b],e);q(j,d[b],e,[],a[P]);var k=g[b];g[b]=j,s(c,a,e,a[P]),a[P].length&&(g[b]=k,a[R]())},enumerable:!n[C](b)})}),h}function v(a,b,c,d){aa(a,c,{enumerable:!0,get:function(){return b[c]},set:function(a){x(b,c,a,d)}})}function w(a,b,c,d){return function(){var e=a.slice();if(Array[S][b].apply(e,arguments),c[G](e),!_)for(var f in e)!e.hasOwnProperty(f)||f in d||v(d,a,f,c);for(var g=Array[S][b].apply(a,arguments),h=0,i=a.length;h<i;h++)a[h]=t(a[h],c[D]);return g}}function x(a,b,c,d){var e=z+"["+b+"]";parseInt(b)===+b&&b>=0&&(c=q(c,d[D],e,[],d[P],!0));var f=a.slice();f[b]=c,s(f,d,e,d[P]),d[R](),a[b]=c}var y="Object",z="Array",A="Function",B="conventionForConstant",C="conventionForPrivate",D="definition",E="assertions",F="_description",G="validate",H="_validator",I="test",J="extend",K="assert",L="expected",M="received",N="path",O="message",P="errorStack",Q="errorCollector",R="unstack",S="prototype",T="constructor",U="default",V="defaultTo",W="defaults",X="return",Y="arguments",Z=["pop","push","reverse","shift","sort","splice","unshift"],$=/\n.*object-model(.|\n)*object-model.*/,_="function"==typeof Proxy,aa=Object.defineProperty;"name"in Function.prototype&&"name"in function(){}||aa(Function.prototype,"name",{get:function(){var a=Function.prototype.toString.call(this).match(/\s*function\s+([^\(\s]*)\s*/);return a&&a[1]}}),!Object.setPrototypeOf&&b(Array,{__proto__:[]})&&(Object.setPrototypeOf=function(a,b){return a.__proto__=b,a}),l(n,Function[S]);var ba=n[S];ba.toString=function(a){return p(this[D]).map(function(b){return m(b,a)}).join(" or ")},ba[E]=[],ba[G]=function(a,b){this[H](a,null,[],this[P]),this[R](b)},ba[I]=function(a){var b,c=this[Q];return this[Q]=function(){b=!0},this(a),this[Q]=c,!b},ba[J]=function(){var a,e,f=g(this[E]),h=g(arguments);b(n[y],this)?(a={},e={},i(a,this[D]),i(e,this[S],!1,!0),h.forEach(function(f){b(n,f)&&i(a,f[D],!0),c(f)&&i(e,f[S],!0,!0),d(f)&&i(a,f,!0,!0)})):a=h.reduce(function(a,b){return a.concat(p(b))},p(this[D])).filter(function(a,b,c){return c.indexOf(a)===b}),h.forEach(function(a){b(n,a)&&(f=f.concat(a[E]))});var j=new this[T](a);return l(j,this[S]),i(j[S],e),j[E]=f,j[Q]=this[Q],j},ba[K]=function(a,b){return b=b||m(a),j(a,F,b),this[E]=this[E].concat(a),this},ba[V]=function(a){return this[U]=a,this},ba[Q]=function(a){var b=new TypeError(a.map(function(a){return a[O]}).join("\n"));throw b.stack&&(b.stack=b.stack.replace($,"")),b},n[B]=function(a){return a.toUpperCase()===a},n[C]=function(a){return"_"===a[0]},j(ba,H,function(a,b,c,d){q(a,this[D],b,c,d),s(a,this,b,d)}),j(ba,R,function(a){if(this[P].length){a||(a=this[Q]);var c=this[P].map(function(a){if(!a[O]){var c=b(Array,a[L])?a[L]:[a[L]];a[O]="expecting "+(a[N]?a[N]+" to be ":"")+c.map(function(a){return m(a)}).join(" or ")+", got "+(null!=a[M]?f(a[M])+" ":"")+m(a[M])}return a});this[P]=[],a.call(this,c)}}),n[y]=function(a){var c=function(a){if(b(c,a))return a;if(!b(c,this))return new c(a);a=h(c[U],a),i(this,a,!0);var d=u(c,this,c[D]);return c[G](d),d};return l(c,Object[S]),o(c,arguments,n[y]),c},l(n[y],ba);var ca=n[y][S];ca[W]=function(a){return i(this[S],a),this},ca.toString=function(a){return m(this[D],a)},j(ca,H,function(a,b,c,e){if(d(a))q(a,this[D],b,c,e);else{var f={};f[L]=this,f[M]=a,f[N]=b,e.push(f)}s(a,this,b,e)}),n[z]=function(a){var b=function(a){a=h(b[U],a);var c;if(b[G](a),_)c=new Proxy(a,{get:function(a,c){return c===T?b:Z.indexOf(c)>=0?w(a,c,b):a[c]},set:function(a,c,d){x(a,c,d,b)},getPrototypeOf:function(){return b[S]}});else{c=Object.create(Array[S]);for(var d in a)a.hasOwnProperty(d)&&v(c,a,d,b);aa(c,"length",{get:function(){return a.length}}),aa(c,"toJSON",{value:function(){return a}}),Z.forEach(function(d){j(c,d,w(a,d,b,c))}),k(c,b)}return c};return l(b,Array[S]),o(b,arguments,n[z]),b},l(n[z],n[S]);var da=n[z][S];da.toString=function(a){return z+" of "+m(this[D],a)},j(da,H,function(a,c,d,e){if(b(Array,a))for(var f=0,g=a.length;f<g;f++)a[f]=q(a[f],this[D],(c||z)+"["+f+"]",d,e,!0);else{var h={};h[L]=this,h[M]=a,h[N]=c,e.push(h)}s(a,this,c,e)}),n[A]=function(){var a=function(b){b=h(a[U],b);var c=a[D],d=function(){var d,e=[];if(i(e,c[W]),i(e,g(arguments)),e.length>c[Y].length){var f={};f[L]=m(b)+" to be called with "+c[Y].length+" "+Y,f[M]=e.length,a[P].push(f)}return c[Y].forEach(function(b,c){e[c]=q(e[c],b,Y+"["+c+"]",[],a[P],!0)}),s(e,a,Y,a[P]),a[P].length||(d=b.apply(this,e),X in c&&(d=q(d,c[X],X+" value",[],a[P],!0))),a[R](),d};return k(d,a),d};l(a,Function[S]);var b={};return b[Y]=g(arguments),o(a,[b],n[A]),a},l(n[A],n[S]);var ea=n[A][S];ea.toString=function(a){var b=A+"("+this[D][Y].map(function(b){return m(b,a)}).join(",")+")";return X in this[D]&&(b+=" => "+m(this[D][X])),b},ea[X]=function(a){return this[D][X]=a,this},ea[W]=function(){return this[D][W]=g(arguments),this},j(ea,H,function(a,b,d,e){if(!c(a)){var f={};f[L]=A,f[M]=a,f[N]=b,e.push(f)}}),a.Model=n}(this);